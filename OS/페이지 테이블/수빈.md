## 페이지 테이블

페이지 테이블은 `가상 주소를 물리 주소로 변환`하기 위한 자료구조입니다.

가상 메모리는 페이지 단위로 나누어지고, 각 가상 페이지가 실제 어느 물리 프레임에 매핑되는지 정보를 저장합니다.

이 과정을 주소 변환이라고 합니다.

<br>

### 메모리 관리 방식: 페이징(Paging)

가상 메모리와 물리 메모리를 동일한 크기의 고정 블록으로 분할해 관리합니다.

- 가상 메모리 : 페이지(Page)
- 물리 메모리 : 프레임(Frame)

프로세스가 사용하는 가상 주소는 항상 연속적일 필요는 없으며, 실제 메모리에는 불연속적으로 배치될 수 있습니다. (외부 단편화 방지)

<br>

### 주소 변환 방식

```
[ 페이지 번호 (Page Number) | 페이지 오프셋 (Offset) ]
```

- 페이지 번호 : 페이지 테이블에서 어떤 항목을 참조할지 결정합니다.
- 오프셋 : 페이지 내에서 실제 접근할 위치입니다.
- Page Number → 페이지 테이블에서 해당 프레임 번호 확인 → Frame Number + Offset → 물리 주소 완성

<br>

### 페이지 테이블의 역할

- 주소 변환
    - 가상 주소의 페이지 번호를 물리 주소의 프레임 번호로 변환합니다.
- 보호 기능
    - 각 페이지마다 접근 권한(R/W/X 등)을 설정하여 보호 기능 수행합니다.
- 유효성 검사
    - 페이지가 메모리에 있는지 없는지 판단합니다. (Valid / Invalid bit)
 
<br>

### TLB(Translation Lookaside Buffer)

TLB는 페이지 테이블 접근 속도를 높이기 위한 `캐시 역할을 하는 고속 버퍼`입니다.

- TLB는 최근에 접근한 가상 페이지 번호와 해당 물리 프레임 번호를 저장해두는 소형 캐시 메모리입니다.
- CPU 내부의 MMU(Memory Management Unit) 내부에 존재하며, **페이지 테이블을 거치지 않고 주소 변환이 가능합니다.**
- 일반적으로 16~512개 정도의 항목만 저장할 수 있어 매우 제한적이지만, 매우 빠른 접근 속도를 가집니다.

```plaintext
가상 주소
   ↓
[TLB] ── Hit  ─────────────→ 물리 주소로 변환
   │
   └─ Miss
        ↓
   [페이지 테이블] ── 있음 → 물리 주소 반환 + TLB 업데이트
                    │
                    └─ 없음 → Page Fault 발생 → 디스크에서 페이지 적재 후 TLB 업데이트
```

- 페이지 테이블을 거치지 않고 물리 주소를 빠르게 얻을 수 있습니다.
- 페이지 테이블에 대한 메모리 접근 횟수를 줄여 전체 성능을 높입니다.
- 최근 접근된 주소가 반복될 가능성이 높다는 `지역성(Locality) 원리`를 활용합니다.

| 항목 | 설명 |
| --- | --- |
| 페이지 테이블의 역할 | 전체 주소 매핑 정보를 보관하는 기본 구조 |
| TLB의 역할 | 자주 사용되는 매핑만 빠르게 접근하기 위한 고속 캐시 |
| 함께 쓰는 이유 | 페이지 테이블은 느리지만 많은 정보를 저장, TLB는 빠르지만 적은 양만 저장 |
